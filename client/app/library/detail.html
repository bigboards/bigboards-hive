<md-progress-linear ng-if="vm.loading" md-mode="indeterminate"></md-progress-linear>

<div layout="row" ng-if="! vm.loading">
    <div style="width: 300px;" layout="column" layout-align="start center">
        <div class="library-card-avatar m-t-16" layout="column" layout-align="center center" flex>
            <img ng-if="vm.tint.data.logo" ng-src="{{vm.tint.data.logo}}" alt="{{vm.tint.data.name}}" class="library-card-image" />
            <img ng-if="!vm.tint.data.logo" src="/content/images/drop_animal_blue.jpg" alt="{{vm.tint.data.name}}" class="library-card-image"/>
        </div>
        <span class="md-headline">{{vm.tint.data.name}}</span>
        <span class="md-caption">by {{vm.tint.data.owner_name}}</span>

        <div style="width: 100%;" layout="row" layout-align="center center">
            <md-button ng-if="vm.isForkable()" ng-click="vm.clone($event)">Fork</md-button>

            <md-button class="md-warn" ng-if="vm.isCollaborator()" ng-click="vm.remove($event)">Remove</md-button>
        </div>

        <div style="width: 100%;" layout="row" layout-align="center center">
            <md-button class="md-primary" ng-click="vm.install($event)">Install</md-button>
        </div>

        <div layout-align="start start" layout="column" style="width: 100%;" class="folding-menu">
            <md-list style="width: 100%">
                <md-subheader class="md-headline md-no-sticky" style="background-color: transparent; cursor: pointer;" ng-click="vm.open('detail')" flex>General</md-subheader>

                <md-subheader class="md-headline md-no-sticky" style="background-color: transparent; cursor: pointer;" ng-click="vm.open('container')">Containers</md-subheader>
                <md-list-item ng-repeat="container in vm.tint.data.stack.containers" ng-if="vm.tab == 'container'">
                    <div ng-click="vm.select(container)"  ng-class="{'selected': vm.model.name == container.name}">
                        <md-icon md-font-icon="lnr-cube" class="lnr"></md-icon>
                        <span class="md-body-1" flex>{{ container.name }}</span>
                    </div>
                </md-list-item>

                <md-subheader class="md-headline md-no-sticky" style="background-color: transparent; cursor: pointer;" ng-click="vm.open('group')">Groups</md-subheader>
                <md-list-item ng-repeat="group in vm.tint.data.stack.groups" ng-if="vm.tab == 'group'">
                    <div ng-click="vm.select(group)"  ng-class="{'selected': vm.model.name == group.name}">
                        <md-icon md-font-icon="lnr-site-map" class="lnr"></md-icon>
                        <span class="md-body-1" flex>{{ group.name }}</span>
                    </div>
                </md-list-item>

                <md-subheader class="md-headline md-no-sticky" style="background-color: transparent; cursor: pointer;" ng-click="vm.open('view')">Views</md-subheader>
                <md-list-item ng-repeat="view in vm.tint.data.stack.views" ng-if="vm.tab == 'view'">
                    <div ng-click="vm.select(view)"  ng-class="{'selected': vm.model.label == view.label}">
                        <md-icon md-font-icon="lnr-desktop" class="lnr"></md-icon>
                        <span class="md-body-1" flex>{{ view.label }}</span>
                    </div>
                </md-list-item>
            </md-list>
        </div>
    </div>
    <div layout="column" flex>
        <div ng-include="vm.view"></div>
    </div>
</div>

<md-fab-speed-dial md-open="false" md-direction="up" class="md-scale md-fab-bottom-right" ng-if="!vm.loading && vm.isCollaborator()" style="position: fixed;">
    <md-fab-trigger>
        <md-button aria-label="menu" class="md-fab" style="background-color: #008888">
            <md-icon md-font-icon="lnr-plus" class="lnr" style="font-size: 24px"></md-icon>
        </md-button>
    </md-fab-trigger>
    <md-fab-actions>
        <md-button aria-label="Container" class="md-fab md-raised md-mini"  ng-click="vm.create.container()">
            <md-tooltip md-direction="left">New Container</md-tooltip>
            <md-icon md-font-icon="lnr-cube" class="lnr" style="font-size: 24px; color: #008888"></md-icon>
        </md-button>
        <md-button aria-label="Group" class="md-fab md-raised md-mini"  ng-click="vm.create.group()">
            <md-tooltip md-direction="left">New Group</md-tooltip>
            <md-icon md-font-icon="lnr-site-map" class="lnr" style="font-size: 24px; color: #008888"></md-icon>
        </md-button>
        <md-button aria-label="View" class="md-fab md-raised md-mini" ng-click="vm.create.view()">
            <md-tooltip md-direction="left">New View</md-tooltip>
            <md-icon md-font-icon="lnr-desktop" class="lnr" style="font-size: 24px; color: #008888"></md-icon>
        </md-button>
    </md-fab-actions>
</md-fab-speed-dial>