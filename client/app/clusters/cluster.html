<div layout-padding layout="column" layout-align="start center" flex>
    <div layout="column" flex style="width: 80%;">
        <div class="md-whiteframe-z1 bb-bg-white" layout-padding layout="row" layout-align="start center">
            <md-icon md-font-icon="lnr-server" class="lnr icon icon-3x m-l-30 m-r-16"></md-icon>
            <h1 class="md-display-1 m-16" flex>{{cluster.data.name}}</h1>
            <div layout="row" class="m-l-16">
                <div layout="row" class="m-l-16">
                    <md-icon md-font-icon="lnr-hdd" class="lnr icon icon-2x m-r-8"></md-icon>
                    <span class="md-body-1">{{ totalStorage | bytes }}</span>
                    <md-tooltip>Amount of Data Storage</md-tooltip>
                </div>
                <div layout="row" class="m-l-16">
                    <md-icon md-font-icon="lnr-flash-memory" class="lnr icon icon-2x m-r-8"></md-icon>
                    <span class="md-body-1">{{ totalMemory | bytes }}</span>
                    <md-tooltip>Amount of Memory</md-tooltip>
                </div>
                <div layout="row" class="m-l-16">
                    <md-icon md-font-icon="lnr-chip" class="lnr icon icon-2x m-r-8"></md-icon>
                    <span class="md-body-1">{{ totalCores }}</span>
                    <md-tooltip>Number of CPU cores</md-tooltip>
                </div>
            </div>
            <div layout="row" layout-align="center center">
                <md-button class="md-icon-button" ng-click="showLinkDialog(event)">
                    <md-tooltip>Link a cluster</md-tooltip>
                    <md-icon md-font-icon="lnr-link" class="lnr icon icon-2x"></md-icon>
                </md-button>
                <md-button class="md-icon-button" ng-href="http://{{cluster.data.name}}.hex.bigboards.io:7000" target="_blank">
                    <md-tooltip>Launch the management console</md-tooltip>
                    <md-icon md-font-icon="lnr-paper-plane" class="lnr icon icon-2x"></md-icon>
                </md-button>
            </div>
        </div>

        <div layout="row" layout-align="end start" class="m-t-16" flex>
            <md-content class="md-whiteframe-z1 m-r-8" flex>
                <md-list>
                    <md-list-item ng-if="devices == null || devices.length == 0"  layout="row" layout-align="start center">
                        <p class="md-body-2">No nodes have been added yet</p>
                    </md-list-item>
                    <md-list-item ng-repeat="node in devices" layout="row" layout-align="start center">
                        <bb-device-item bb-device="node" bb-on-remove="disconnectNode(node)"></bb-device-item>
                    </md-list-item>
                </md-list>
            </md-content>
            <div style="width: 300px;" class="m-l-8">
                <md-content class="md-whiteframe-z1 m-b-16">
                    <md-toolbar>
                        <div class="md-toolbar-tools">
                            <span>Adding a new device</span>
                        </div>
                    </md-toolbar>
                    <div layout-padding>
                        <div layout="row">
                            <md-autocomplete
                                    md-no-cache="false"
                                    md-selected-item="deviceToAdd"
                                    md-search-text="deviceName"
                                    md-items="item in searchDevices(deviceName)"
                                    md-item-text="item.id"
                                    md-min-length="2"
                                    placeholder="Device Name">
                                <md-item-template>
                                    <span md-highlight-text="deviceName" md-highlight-flags="^i">{{ item.data.name }} - {{ item.data.mac }}</span>
                                </md-item-template>
                                <md-not-found>
                                    No devices matching "{{deviceName}}" were found.
                                </md-not-found>
                            </md-autocomplete>

                            <!--<md-input-container class="m-r-15" flex>-->
                                <!--<label>Device Code</label>-->
                                <!--<input ng-model="deviceCode" aria-label="Device Code" required>-->
                            <!--</md-input-container>-->
                            <md-button class="md-primary" ng-click="connectDevice(deviceToAdd)">
                                LINK
                            </md-button>
                        </div>
                    </div>
                </md-content>

                <md-content class="md-whiteframe-z1 m-b-16">
                    <md-toolbar>
                        <div class="md-toolbar-tools">
                            <span>Collaborators</span>
                            <span flex></span>
                            <md-button ng-click="createCollaborator($event, cluster.data)" class="md-icon-button">
                                <md-icon md-font-icon="lnr-plus" class="lnr icon icon-2x"></md-icon>
                            </md-button>
                        </div>
                    </md-toolbar>
                    <div layout="column">
                        <md-list>
                            <md-list-item ng-repeat="item in cluster.data.collaborators">
                                <p> {{ item.name }} </p>
                                <md-icon md-font-icon="lnr-trash" ng-click="removeCollaborator($event, cluster.data, item)" aria-label="Remove Collaborator" class="md-secondary md-warn lnr icon" style="margin-bottom: 0; margin-top: 4px"></md-icon>
                            </md-list-item>
                        </md-list>
                    </div>
                </md-content>

                <md-content class="md-whiteframe-z1  m-b-16">
                    <md-toolbar class="md-warn">
                        <div class="md-toolbar-tools">
                            <span>Danger Zone</span>
                        </div>
                    </md-toolbar>
                    <div layout-padding layout="column" layout-align="center center">
                        <p class="md-body-1 md-warn">
                            Clicking the button below will remove this device and all nodes connected to it from the hive.
                            <strong>This action can not be undone,</strong> You can however create a new device later on
                            and again link all the nodes to that new device.
                        </p>
                        <md-button class="md-warn" ng-click="removeDevice()">
                            Remove this device
                        </md-button>
                    </div>
                </md-content>
            </div>
        </div>
    </div>
</div>